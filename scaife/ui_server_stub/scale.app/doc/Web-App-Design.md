---
title: 'SCALe : Web App Design'
---
[SCALe](index.md) / [Source Code Analysis Lab (SCALe)](Welcome.md)
<!-- <legal> -->
<!-- SCALe version r.6.7.0.0.A -->
<!--  -->
<!-- Copyright 2021 Carnegie Mellon University. -->
<!--  -->
<!-- NO WARRANTY. THIS CARNEGIE MELLON UNIVERSITY AND SOFTWARE ENGINEERING -->
<!-- INSTITUTE MATERIAL IS FURNISHED ON AN "AS-IS" BASIS. CARNEGIE MELLON -->
<!-- UNIVERSITY MAKES NO WARRANTIES OF ANY KIND, EITHER EXPRESSED OR -->
<!-- IMPLIED, AS TO ANY MATTER INCLUDING, BUT NOT LIMITED TO, WARRANTY OF -->
<!-- FITNESS FOR PURPOSE OR MERCHANTABILITY, EXCLUSIVITY, OR RESULTS -->
<!-- OBTAINED FROM USE OF THE MATERIAL. CARNEGIE MELLON UNIVERSITY DOES NOT -->
<!-- MAKE ANY WARRANTY OF ANY KIND WITH RESPECT TO FREEDOM FROM PATENT, -->
<!-- TRADEMARK, OR COPYRIGHT INFRINGEMENT. -->
<!--  -->
<!-- Released under a MIT (SEI)-style license, please see COPYRIGHT file or -->
<!-- contact permission@sei.cmu.edu for full terms. -->
<!--  -->
<!-- [DISTRIBUTION STATEMENT A] This material has been approved for public -->
<!-- release and unlimited distribution.  Please see Copyright notice for -->
<!-- non-US Government use and distribution. -->
<!--  -->
<!-- DM19-1274 -->
<!-- </legal> -->

SCALe : Web App Design
=======================

-   [Model](#model)
-   [Controller](#controller)
-   [Views](#views)

## Model

Each audit is organized as a *Project* instance. An alertCondition is a
*Display* instance. Messages generated by the checkers are instances
of *Messages*. They are related in the Rails way as follows:

-   A Project has many Displays and Messages.
-   A Display belongs to a Project and has many Messages.
-   A Message has one Display.

The Project model is a purely organizational construct. The main model
is named `display`. A single entry is a
row of an alertCondition with its verdict, line, path, and other details.

The Display model contains two main
functions: `importScaleMI` and `createLinks`. The
function `importScaleMI` inner-joins the external scale database, erases
the existing web app database, if any, and uses bulk SQL queries to
populate the web app database. We use bulk SQL queries that bypass rails
validations purely for performance reasons. The
function `createLinks` iterates through all database entries and fills
in the link attribute according to the GNU global pages
in `/public/GNU/[PROJECT_ID]/HTML/`.

## Controller

The application controller contains some configuration items:

1.  Username and password authentication
2.  SSL option
3.  Paths to SCALe archive (backup and nonbackup)

The source code being audited is not backed up. All other items (GNU
pages, SCALe/SQLite3 databases) are backed up.

The alertconditions controller serves all queries to index and mass updating
of entries. It also handles exporting of the database in SQLite and CSV
format.

The displays controller provides the basic new, update, and create
actions for the `best_in_place` Ruby Gem, which allows for immediate and
asynchronous updating of individual display items.

The projects controller handles the basic operations for managing a list
of projects.

Note: The **destroy** link on the main page destroys all files related
to the project. These files include the GNU global pages generated, the
extra copy of the SCALe database, all alertConditions and messages related
to the project from the web app's database, the uploaded source, and
uploaded analysis files.

## Views

The bulk of the views are in the alertConditions views. The alertConditions
table (table in the code is currently called "alerts", but they are actually
alertConditions) partial is recreated upon asynchronous response from the
server, and updates are also done asynchronously using the `best_in_place` gem.
Mass update and filters requests are also done asynchronously.

The project views include simple new and edit pages. There is also a
database page, which is the page where all the source and analysis are
uploaded and processed by [`digest_alerts.py`](Back-End-Script-Design.md#digest\_alerts.py) to create the
scale database.

The display views contain only a new and a messages page. The messages
page is displayed when clicking the **Secondary Message Set** link to
show additional messages, and the new page is shown when manually
creating alertConditions.

Layout views contain the overall structure of the web app. They are used
to display content common to all views. Specifically, the application
page renders the header and footer partial views, which separate content
on the top of the page from content at the bottom of the page.

------------------------------------------------------------------------

[![](attachments/arrow_left.png)](Audit-Instructions.md)
[![](attachments/arrow_up.png)](Welcome.md)
[![](attachments/arrow_right.png)](Back-End-Script-Design.md)
